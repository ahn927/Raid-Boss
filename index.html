<!DOCTYPE html>
<html lang="en">
<head>
  <title> TapNCook </title>
  <meta charset="utf-8" />
  <link rel="stylesheet" type="text/css" href="./TapNCook.css">
  <link href="https://fonts.googleapis.com/css?family=PT+Sans|Lily+Script+One|Oleo+Script+Swash+Caps:700" rel="stylesheet">
</head>

<body>

  <!-- Bootstrap stuff!-->
  <!-- Latest compiled and minified CSS -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css">

  <!-- jQuery library -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

  <!-- Latest compiled JavaScript -->
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js"></script>

  <div id="header">
		<div id="menuDiv">
      <img id="menuIcon" src="icon/Menu.png" alt="Menu">
    </div>
		<p>Tap'N CooK</p>
		<div id="search">
      <img id="searchIcon" src="icon/Mag.png" alt="Search">
    </div>
  </div>
  
  <!-- Nav Bar -->
  <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
    <ul class="navbar-nav">
      <li class="nav-item">
        <a class="nav-link" href="./index.html">Home</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="./AboutUs.html">About Us</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="./AffiliatedApps.html">Affiliated Apps</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="./login.html">Login</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="./signup.html">Sign Up</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="./bait.html">Don't Click</a>
      </li>
      <li class="nav-item">
        <a class="nav-link" href="./FoodNinja/FoodNinja.html">Really, Don't Click</a>
      </li>
    </ul>
    <!--
    <div class="dropdown">
      <button type="button" class="btn btn-primary dropdown-toggle bg-secondary" data-toggle="dropdown">
        More Features
    </div>

    <div class="iconsDivs">
      <img id="fruitIcon" class="icons" src="icon/banana.png" alt="Vegetables" />
      <div id="fruitDiv">
        <div class="fruits">
          <p id="banana">Banana</p>
        </div>
        <div class="fruits">
          <p id="apple">Apple</p>
        </div>
        <div class="fruits">
          <p id="grapes">Grapes</p>
        </div>
      </div>
    </div>

    <div class="iconsDivs">
      <img id="breadIcon" class="icons" src="icon/toast.png" alt="Bread" />
      <div id="breadDiv">
        <div class="bread">
          <p id="toast">Toast</p>
        </div>
        <div class="bread">
          <p id="flatbread">Flat Bread</p>
        </div>
        <div class="bread">
          <p id="bagguette">Baguette</p>
        </div>
      </div>
    </div>

    <div class="iconsDivs">
      <img id="meatIcon" class="icons" src="icon/steak.png" alt="Bread" />
      <div id="meatDiv">
        <div class="meat">
          <p id="beef">Beef</p>
        </div>
        <div class="meat">
          <p id="chicken">Chicken</p>
        </div>
        <div class="meat">
          <p id="pork">Pork</p>
        </div>
      </div>
    </div>

    <div class="iconsDivs">
      <img id="dairyIcon" class="icons" src="icon/egg.png" alt="Bread" />
      <div id="dairyDiv">
        <div class="dairy">
          <p id="milk">Milk</p>
        </div>
        <div class="dairy">
          <p id="cheese">Cheese</p>
        </div>
        <div class="dairy">
          <p id="butter">Butter</p>
        </div>
      </div>
    </div>

    <div id="basket">
      <p>Basket</p>
        <p id="bdiv0" class="basketItem"></p>
        <p id="bdiv1" class="basketItem"></p>
        <p id="bdiv2" class="basketItem"></p>
        <p id="bdiv3" class="basketItem"></p>
      </button>
      <div class="dropdown-menu">
        <a class="dropdown-item" href="./login.html">Login</a>
        <a class="dropdown-item" href="#">Sign Up</a>
        <a class="dropdown-item" href="#">Settings</a>
      </div>
    </div>
    -->
  </nav>

  <div id="whole">
    <p id="subhead">What do you want to use?</p>
    <div id="searchBar"><input placeholder="Search Ingredient"></div>

    <div class="iconsDivs">
      <img id="vegIcon" class="icons" src="icon/lettuce.png" alt="Vegetables" />
      <div id="vegDiv">
        <div class="vegies">
          <p id="carrot">Carrot</p>
        </div>
        <div class="vegies">
          <p id="lettuce">Lettuce</p>
        </div>
        <div class="vegies">
          <p id="tomato">Tomato</p>
        </div>
      </div>
        <p id="bdiv4" class="basketItem"></p>
        <img id="arrow" src="icon/whitearrow.png"/>
    </div>

    <div id="footer">
      <div id="bcitdiv">
        <a href="https://www.bcit.ca/" target="blank">
          <img src="logos/192px-BCITwordmark.svg.png" id="bcit" />
        </a>
      </div>
      <div id="loveFooddiv">
        <a href="https://www.lovefoodhatewaste.com/" target="blank">
          <img src="logos/logo_og.png" id="loveFood" />
        </a>
      </div>
      <div id="metroVandiv">
        <a href="http://www.metrovancouver.org/" target="blank">
          <img src="logos/metro-vancouver-logo-colour-illustrator-file.png" id="metro" />
        </a>
      </div>
    </div>

  </div>
  <!--#################################################################################
      #############################Recipe page starts####################################
      ###################################################################################-->
      <div id = "menu" style="display: none">
        <div class="row">
          <div class="col-sm-12">
            <div class="recipes">
              <a href='#'><p class="recipeID"></p></a>
              <img class = "images" style="z-index: -1">
              <div class = "toggle">
              <p class = "information"  style="display:none">Information</p>
              <p class = "recipeStats" style="display:none"></p>
              <p class = "ingredients"  style="display:none">Ingredients</p>
              <p class = "ingredientAPI" style="display:none"></p>
              <p class = "instructions"  style="display:none">Instruction</p>
              <p class = "recipeIns" style="display:none"></p>
              </div>
            </div>
            <div class="recipes">
              <a href='#'><p class="recipeID"></p></a>
              <img class = "images"> 
              <p class = "information"  style="display:none">Information</p>
              <p class = "recipeStats" style="display:none"></p>
              <p class = "ingredients"  style="display:none">Ingredients</p>
              <p class = "ingredientAPI" style="display:none"></p>
              <p class = "instructions"  style="display:none">Instruction</p>
              <p class = "recipeIns" style="display:none"></p>
            </div>
            <div class="recipes">
              <a href='#'><p class="recipeID"></p></a>
              <img class = "images"> <!-- src= "stuff" alt="something went wrong!"> -->
              <p class = "information"  style="display:none">Information</p>
              <p class = "recipeStats" style="display:none"></p>
              <p class = "ingredients"  style="display:none">Ingredients</p>
              <p class = "ingredientAPI" style="display:none"></p>
              <p class = "instructions"  style="display:none">Instruction</p>
              <p class = "recipeIns" style="display:none"></p>
            </div>
            <div class="recipes">
              <a href='#'><p class="recipeID"></p></a>
              <img class = "images"> 
              <p class = "information"  style="display:none">Information</p>
               <p class = "recipeStats" style="display:none"></p>
               <p class = "ingredients"  style="display:none">Ingredients</p>
              <p class = "ingredientAPI" style="display:none"></p>
              <p class = "instructions"  style="display:none">Instruction</p>
              <p class = "recipeIns" style="display:none"></p>
            </div>
            <div class="recipes">
              <a href='#'><p class="recipeID"></p></a>
              <img class = "images">
              <p class = "information"  style="display:none">Information</p>
              <p class = "recipeStats" style="display:none"></p>
              <p class = "ingredients"  style="display:none">Ingredients</p>
              <p class = "ingredientAPI" style="display:none"></p>
              <p class = "instructions"  style="display:none">Instruction</p>
              <p class = "recipeIns" style="display:none"></p>
            </div>
            <div class="recipes">
              <a href='#'><p class="recipeID"></p></a>
              <img class = "images">
              <p class = "information"  style="display:none">Information</p>
              <p class = "recipeStats" style="display:none"></p>
              <p class = "ingredients"  style="display:none">Ingredients</p>
              <p class = "ingredientAPI" style="display:none"></p>
              <p class = "instructions"  style="display:none">Instruction</p>
              <p class = "recipeIns" style="display:none"></p>
            </div>
          </div>
        </div>
    </div>
  <!--############################################################################################################
      ######################################Recipe page ends####################################################
      ##########################################################################################################-->

  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>

  <script>
    /*<![CDATA[*/
    $(document).ready(function () {

      var ingredients = ["", "", "", "", ""];
      var count = 0;
      var basketCount = 0;

      /*$('#vegDiv').on('click', '*', function() {
        var idVeg = $(this).text();
        $("#bdiv" + basketCount + "").children("p").text(idVeg);
        basketCount++;
        console.log(idVeg);
      });
      $('#fruitDiv').on('click', '*', function() {
        var idFruit = $(this).text();
        $("#bdiv" + basketCount + "").children("p").text(idFruit);
        basketCount++;
        console.log(idFruit);
      });
      $('#breadDiv').on('click', '*', function() {
        var idBread = $(this).text();
        $("#bdiv" + basketCount + "").children("p").text(idBread);
        basketCount++;
        console.log(idBread);
      });

      $('#dairyDiv').on('click', '*', function() {
        var idDairy = $(this).text();
        $("#bdiv" + basketCount + "").children("p").text();
        console.log(basketCount);
        console.log(idDairy);
        basketCount++;
        console.log(basketCount);
      });
      
      $('#meatDiv').on("click", '*', function() {
        
        var idMeat = $(this).text();
        $("#bdiv" + basketCount + "").children("p").text(idMeat);
        console.log(basketCount);
        console.log(idMeat);
        basketCount++;
        console.log(basketCount);
        
      });*/

      $('#searchBar > input').keyup( function(e) {
        var sameSearch = false;
        for (let i = 0; i<ingredients.length-1;i++){
          if(ingredients[i]==$(this).val()){
            sameSearch = true;
          }
        }
        if(e.keyCode == 13 && count < 5 && sameSearch == false){
          var sb = $(this).val();
					$("#bdiv" + count + "").show();
          $("#bdiv" + count + "").text(sb);
          $("#arrow").show(500);
          console.log(sb);
          ingredients[count] = sb;
          count++;
          $(this).val("");
        }
      });

      $('#vegDiv > div > p').click(function() {
        var sameVeg = false;
        for (let i = 0; i<ingredients.length-1;i++){
          if(ingredients[i]==$(this).text()){
            sameVeg = true;
          }
        }
        if(count < 5 && sameVeg == false){
          var idVeg = $(this).text();
					$("#bdiv" + count + "").show();
          $("#bdiv" + count + "").text(idVeg);
          $("#arrow").show(500);
          ingredients[count] = idVeg;
          console.log(ingredients);
          count++;
        }
      });

      $('#fruitDiv > div > p').click(function() {
        var sameFruit = false;
        for (let i = 0; i<ingredients.length-1;i++){
          if(ingredients[i]==$(this).text()){
            sameFruit = true;
          }
        }
        if(count < 5 && sameFruit == false){
          var idFruit = $(this).text();
					$("#bdiv" + count + "").show();
          $("#bdiv" + count + "").text(idFruit);
          $("#arrow").show(500);
          ingredients[count] = idFruit;
          console.log(ingredients);
          count++;
        }
      });

      $('#breadDiv > div > p').click(function() {
        var sameBread = false;
        for (let i = 0; i<ingredients.length-1;i++){
          if(ingredients[i]==$(this).text()){
            sameBread = true;
          }
        }
        if(count < 5 && sameBread == false){
          var idBread = $(this).text();
					$("#bdiv" + count + "").show();
          $("#bdiv" + count + "").text(idBread);
          $("#arrow").show(500);
          ingredients[count] = idBread;
          console.log(ingredients);
          count++;
        }
      });     

      $("#meatDiv > div > p").click( function() {
        var sameMeat = false;
        for (let i = 0; i<ingredients.length-1;i++){
          if(ingredients[i]==$(this).text()){
            sameMeat = true;
          }
        }
        if(count < 5 && sameMeat == false){
          var idMeat = $(this).text();
					$("#bdiv" + count + "").show();
          $("#bdiv" + count + "").text(idMeat);
          $("#arrow").show(500);
          ingredients[count] = idMeat;
          console.log(ingredients);
          count++;    
        }    
      });

      $("#dairyDiv > div > p").click(function() {
        var sameDairy = false;
        for (let i = 0; i<ingredients.length-1;i++){
          if(ingredients[i]==$(this).text()){
            sameDairy = true;
          }
        }
        if(count < 5 && sameDairy == false){
          var idDairy = $(this).text();
					$("#bdiv" + count + "").show();
          $("#bdiv" + count + "").text(idDairy);
          $("#arrow").show(500);
          ingredients[count] = idDairy;
          console.log(ingredients);
          count++;
        }
      });
			
			$("#search").click(function (){
        $("#searchBar").slideToggle();
      });

      $("#vegIcon").click(function () {
        $("#vegDiv").slideToggle();
      });
      $("#fruitIcon").click(function () {
        $("#fruitDiv").slideToggle();
      });
      $("#breadIcon").click(function () {
        $("#breadDiv").slideToggle();
      });
      $("#meatIcon").click(function () {
        $("#meatDiv").slideToggle();
      });
      $("#dairyIcon").click(function () {
        $("#dairyDiv").slideToggle();
      }); 



        /*****************************************/
        /*********removal functionality **********/
        /*****************************************/
			$(".basketItem").click(function() {
				var ids = $(this).text();
        console.log(ids);
				$(this).hide();
        console.log(ingredients);
				
				
				for(let i = 0; i < ingredients.length-1;i++) {
          if (ingredients[i] == ids){
            ingredients[i]="";
            var removedIndex = i;
            console.log(ingredients);
            console.log("removed index: " + removedIndex);
          }
        }
        for (var i = ingredients.length - 1; i > removedIndex; i--) {
          if (ingredients[i] != "") {
            ingredients[removedIndex] = ingredients[i];
            ingredients[i] = "";
            console.log(ingredients);
            break;
          }
        }
				
				count--;
				if (count == 0) {
					$("#arrow").slideUp();
				} 

				console.log(ids);
			});
			
       /* $("#bcarrot").click(function() {
              count--;
              $("#bcarrot").hide(500);
              $("#carrot").css("filter" , "");
              for(let i = 0; i < ingredients.length;i++) {
                if (ingredients[i] == "carrot"){
                  ingredients[i]="";
                  var removedIndex = i;
                  console.log(removedIndex);
                }
              }
              for(var i = ingredients.length - 1; i > removedIndex;i--) {
                console.log(ingredients[i] + count);
                if (ingredients[i] != ""){
                  ingredients[removedIndex] = ingredients[i];
                  ingredients[i] = "";
                  break;
                }
              }
              console.log(ingredients);
              removeArrow();
          });
          $("#blettuce").click(function() {
            count--;
              $("#blettuce").hide(500);
              $("#lettuce").css("filter" , "");
              for(let i = 0; i < ingredients.length;i++) {
                if (ingredients[i] == "lettuce"){
                  ingredients[i]="";
                  var removedIndex = i;
                  console.log(removedIndex);
                }
              }
              for(var i = ingredients.length - 1; i > removedIndex;i--) {
                console.log(ingredients[i] + count);
                if (ingredients[i] != ""){
                  ingredients[removedIndex] = ingredients[i];
                  ingredients[i] = "";
                  break;
                }
              }
              removeArrow();
            console.log(ingredients);
          });
          $("#bcheese").click(function() {
            count--;
              $("#bcheese").hide(500);
              $("#cheese").css("filter" , "");
              for(let i = 0; i < ingredients.length;i++) {
                if (ingredients[i] == "cheese"){
                  ingredients[i]="";
                  var removedIndex = i;
                  console.log(removedIndex);
                }
              }
              for(var i = ingredients.length - 1; i > removedIndex;i--) {
                console.log(ingredients[i] + count);
                if (ingredients[i] != ""){
                  ingredients[removedIndex] = ingredients[i];
                  ingredients[i] = "";
                  break;
                }
              }
              removeArrow();
            console.log(ingredients);
          });
          $("#bbanana").click(function() {
            count--;
              $("#bbanana").hide(500);
              $("#banana").css("filter" , "");
              for(let i = 0; i < ingredients.length;i++) {
                if (ingredients[i] == "banana"){
                  ingredients[i]="";
                  var removedIndex = i;
                  console.log(removedIndex);
                }
              }
              for(var i = ingredients.length - 1; i > removedIndex;i--) {
                console.log(ingredients[i] + count);
                if (ingredients[i] != ""){
                  ingredients[removedIndex] = ingredients[i];
                  ingredients[i] = "";
                  break;
                }
              }
              removeArrow();
            console.log(ingredients);
          });
          $("#btomato").click(function() {
            count--;
              $("#btomato").hide(500);
              $("#tomato").css("filter" , "");
              for(let i = 0; i < ingredients.length;i++) {
                if (ingredients[i] == "tomato"){
                  ingredients[i]="";
                  var removedIndex = i;
                  console.log(removedIndex);
                }
              }
              for(var i = ingredients.length - 1; i > removedIndex;i--) {
                console.log(ingredients[i] + count);
                if (ingredients[i] != ""){
                  ingredients[removedIndex] = ingredients[i];
                  ingredients[i] = "";
                  break;
                }
              }
              removeArrow();
            console.log(ingredients);
          });
          $("#bbread").click(function() {
            count--;
              $("#bbread").hide(500);
              $("#bread").css("filter" , "");
              for(let i = 0; i < ingredients.length;i++) {
                if (ingredients[i] == "bread"){
                  ingredients[i]="";
                  var removedIndex = i;
                  console.log(removedIndex);
                }
              }
              for(var i = ingredients.length - 1; i > removedIndex;i--) {
                console.log(ingredients[i] + count);
                if (ingredients[i] != ""){
                  ingredients[removedIndex] = ingredients[i];
                  ingredients[i] = "";
                  break;
                }
              }
              removeArrow();
            console.log(ingredients);
          });*/
          /*var removeArrow = function(){
            var isEmpty = true;
            for (let i = 0 ; i < ingredients.length; i++){
              if (ingredients[i] != "") {
                isEmpty = false;
                break;
              } else {
                isEmpty = true;
              }
            }
            if(isEmpty == true){
                $("#arrow").hide(500);
              }
          }*/
        /*****************************************/
        /*********removal functionality end*******/
        /*****************************************/


      $("#arrow").click(function () {
        $("#whole").hide(500);
        $("#menu").show(500);
        
        $.ajax({
          url: "GetRecipeID.php",
          dataType: "json",
          type: "GET",
          data: {
            output: 'json',
            ingredients: ingredients
          },
          success: function (data) {
            var items = data;

            var x = 0;
            $('.recipes').each(function (i, $this) {
              if ((items["body"][x]) == null) {
                $(this).hide();
              }
              x++;
            });
            
            x=0;
            //Loops through all the recipeID classes, and sets the recipe title for each.
            $('.recipeID').each(function (i, $this) {
              if ((items["body"][x]) != null) {
                $(this).text(items["body"][x]["title"] /*+ " and ID: " + items["body"][x]["id"]*/ );
                $(this).attr('id', items["body"][x]["id"]);
              }
              x++;
            });

            

            x = 0;

            //loops through all the recipeID classes, and sets the images for each
            $('.images').each(function (i, $this) {
              if ((items["body"][x]) != null) {
                //$(this).text(items["body"][x]["image"]);
                $(this).attr('src', items["body"][x]["image"]);
                $(this).attr('id', items["body"][x]["id"]);
              }
              x++;
            });

            x = 0;

            //assign id number to information dropdown bar
            $('.information').each(function (i, $this) {
              if ((items["body"][x]) != null) {
                $(this).attr('id', items["body"][x]["id"]);
                $(this).attr('class', $(this).attr('class') +"_" + items["body"][x]["id"]);
              }
              x++;
            });

            x = 0;

            //Loops through all the recipeStats classes (paragraph element that holds stats (time, dietary needs))
            //, and changes the class name
            //to "statsrecipe id" for future reference
            $('.recipeStats').each(function (i, $this) {
              if ((items["body"][x]) != null) {
                console.log((items["body"][x]));
                $(this).attr('class', "stats_" + items["body"][x]["id"]);
                //$(this).addClass(items["body"][x]["id"]);
                //$(this).attr('src', items["body"][x]["image"]);
              }
              x++;
            });

            x = 0;
            
            //Loops through all the recipeNumber classes (paragraph element), and changes the class name
            //to the recipe id for future reference
            $('.ingredients').each(function (i, $this) {
              
              if ((items["body"][x]) != null) {
                $(this).attr('id', items["body"][x]["id"]);
                $(this).attr('class', $(this).attr('class') +"_" + items["body"][x]["id"]);
              }
              x++;
            });

            x = 0;

            $('.ingredientAPI').each(function (i, $this) {
              if ((items["body"][x]) != null) {
                $(this).attr('class', "ing_" + items["body"][x]["id"]);
              }
              x++;
            });

            x=0;

            $('.instructions').each(function (i, $this) {
              if ((items["body"][x]) != null) {
                $(this).attr('id', items["body"][x]["id"]);
                $(this).attr('class', $(this).attr('class') +"_" + items["body"][x]["id"]);
              }
              x++;
            });

            x=0;

            $('.recipeIns').each(function (i, $this) {
              if ((items["body"][x]) != null) {
                $(this).attr('class', "rec_" + items["body"][x]["id"]);
              }
              x++;
            });

            x=0;
            

          },
          error: function (jqXHR, textStatus, errorThrown) {
            $("#p1").text(textStatus + " " + errorThrown +
              jqXHR.responseText);
          }
        });
      });

      //prevent to put the same information into paragraphs.
      showmenu = [];
      $('.images').click(function (e) {
        
        // don't allow the anchor to visit the link
        e.preventDefault();
        $('.information_' + $(this).attr('id')).toggle(200);
        $('.ingredients_' + $(this).attr('id')).toggle(200);
        $('.instructions_' + $(this).attr('id')).toggle(200);
        $('.stats_' + $(this).attr('id')).hide(200);
        $('.ing_' + $(this).attr('id')).hide(200);
        $('.rec_' + $(this).attr('id')).hide(200);
        //prevent to put the same information into paragraphs.
        if(showmenu[""+ $(this).attr("id")] == null){
          showmenu[""+ $(this).attr("id")] = true;
        
        console.log('clicked to get recipe info');
        var clickedElement = this;
        
        $.ajax({
          url: "GetRecipeInfo.php",
          dataType: "json",
          type: "GET",
          data: {
            output: 'json',
            id: $(this).attr("id")
          },
          success: function (data) {
            var dataBody = data["body"][0];
            
            
            //APPENDS THE INGREDIENTS LIST TO THE PARAGRAPH ELEMENT WITH CLASS NAME = RECIPE ID, WITHOUT ADDING DUPLICATE INGREDIENTS
            //$("." + $(clickedElement).attr("id")).append("<b>Ingredients needed:</b> ");
            $("." + $(clickedElement).attr("id")).append('<b>Ingredients</b><br/>');
            
            var ingredientsNeeded = "";
            if (data["body"][0] != undefined){
              for (var i = 0; i < dataBody["steps"].length; i++) {
                for (var j = 0; j < dataBody["steps"][i]["ingredients"].length; j++) {
                  if (ingredientsNeeded.indexOf(dataBody["steps"][i]["ingredients"][j]["name"]) == -1) {
                    ingredientsNeeded += (dataBody["steps"][i]["ingredients"][j]["name"] + ", ");
                  } else {
                    console.log("duplicate ingredient: " + dataBody["steps"][i]["ingredients"][j]["name"]);
                  }
                }
              }
            }
            else {
              ingredientsNeeded = "Sorry, no recipe instructions can be obtained. ";
              console.log("databody not defined!");
            }
            //Capitalize the first letter of each ingredient
            console.log(ingredientsNeeded);
            
            $(".ing_" + $(clickedElement).attr("id")).append(ingredientsNeeded);
            
            var recipeTable = "<ol>";

            //APPENDS THE RECIPE STEPS
            if (data["body"][0] != undefined){
              
              for (var i = 0; i < dataBody["steps"].length; i++) {
                recipeTable+= "<li>" + dataBody["steps"][i]["step"] + "</li><br/>";
              }
              recipeTable += "</ol>";
            }
            $(".rec_" + $(clickedElement).attr("id")).append(recipeTable);
      
            //////NEW CHANGESS (TIME FEATURE)  VIA NESTED AJAX CALL/////
      $.ajax({
        url: "GetRecipeAdditionalInfo.php",
        dataType: "json",
        type: "GET",
        data: { id: $(clickedElement).attr("id") },
        success: function (response) {
          var info = response;
          //do stuff
          console.log("ready in "+ info["body"]["readyInMinutes"] + " minutes");
          console.log("IS IT VEGETARIAN? "+ info["body"]["vegetarian"]);
          console.log("is it vegan? "+ info["body"]["vegan"]);
          console.log("is it gluten free? "+ info["body"]["glutenFree"]);
          console.log("dairy free?  "+ info["body"]["dairyFree"]);

          //I am appending it to the div with class ".stats_RECIPEID" 
          $(".stats_" + $(clickedElement).attr("id")).append("Estimated Time: " + info["body"]["readyInMinutes"] + " minutes. </br>");
          
          var infoBody = info["body"];
          console.log("infobody vegetarian is:" + infoBody["vegetarian"]); //this returns a boolean value 

          if (infoBody["vegetarian"] === true){
            console.log("is vegetarian");
            $(".stats_" + $(clickedElement).attr("id")).append("For Vegetarians! </br>");
          }
          if (infoBody["vegan"] === true){
            $(".stats_" + $(clickedElement).attr("id")).append("For Vegans! </br>");
          }
          if (infoBody["glutenFree"] === true){
            $(".stats_" + $(clickedElement).attr("id")).append("Gluten Free! </br>");
          }
          if (infoBody["dairyFree"] === true){
            $(".stats_" + $(clickedElement).attr("id")).append("Dairy Free! </br>");
          }


          //If the information already is visible, hide it otherwise, show it.
          /*if (showMenu==false){
              $(".stats_" + $(clickedElement).attr("id")).show(500);
              $("." + $(clickedElement).attr("id")).show (500);
              showMenu = true;
            } else{
              $(".stats_" + $(clickedElement).attr("id")).hide(500);
              $("." + $(clickedElement).attr("id")).hide (500);
              $(".stats_" + $(clickedElement).attr("id")).empty();
              $("." + $(clickedElement).attr("id")).empty();
              showMenu = false;
            }*/
        },
        error: function (jqXHR, textStatus, errorThrown) {
          console.log("ajax failed");
          console.log(textStatus + " " + errorThrown
        + jqXHR.responseText);
         }
        
      });

          },
          error: function (jqXHR, textStatus, errorThrown) {
            $("#p1").text(textStatus + " " + errorThrown +
              jqXHR.responseText);
          }
        });
      }
      });
      //drop down bar functionality
      $(".information").click(function(){
        $(".stats_" + $(this).attr("id")).toggle(200);
      });
      $(".ingredients").click(function(){
        $(".ing_" + $(this).attr("id")).toggle(200);
      });
      $(".instructions").click(function(){
        $(".rec_" + $(this).attr("id")).toggle(200);
      });
      
      $(".ingredients").css("background-color", "orange");
      $(".instructions").css("background-color", "orange");
      $(".information").css("background-color", "orange");
      $(".information").css("border", "1px solid black");
      $(".ingredients").css("border", "1px solid black");
      $(".instructions").css("border", "1px solid black");
      $(".recipeIns").css("text-align", "left");
      $(".recipeID").css("margin", "0 auto");
      $(".recipeID").css("background-color", "crimson");
      
      $(".images").css("margin", "0 auto");
      $(".images").css("padding", "0");
      $(".images").hover(function() {
        $( this ).css("filter", "opacity(30%)");
      }, function() {
        $( this ).css("filter", "");
      });
      $(".col-sm-12").css("padding","0");
      $(".recipes").css("border", "solid 3px crimson");
      
      
    });

    /*]]>*/
  </script>

</body>

</html>